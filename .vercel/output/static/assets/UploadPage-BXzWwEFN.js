import{j as e,e as n,f as r,T as t}from"./ui-vendor-CNk_zvnd.js";import{r as s,u as a,L as i}from"./react-vendor-BjqsZnKR.js";import{u as o,d as l}from"./useSEO-Dyc3Kjsl.js";import{u as c,p as u}from"./pdf-BuvusFHH.js";import{a as d,B as p,t as m}from"./index-CcJ1OsnK.js";import{A as f}from"./AnalysisAnimation-DGwhNpA-.js";import"./tslib.es6-JUDyx5pz.js";import"./___vite-browser-external_commonjs-proxy-CwsIZm4V.js";u.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${u.version}/pdf.worker.min.js`;const x=()=>{const[x,N]=s.useState(!1),[h,T]=s.useState(null),j=a(),{t:E}=d();o({title:"AmÃ©liorer mon CV existant - Studyia Career | Upload et optimisation de CV",description:"TÃ©lÃ©chargez votre CV existant (PDF, DOCX) et amÃ©liorez-le avec Studyia Career. Notre IA analyse votre CV et vous aide Ã  le restructurer avec un design professionnel.",keywords:"amÃ©liorer CV, optimiser CV, upload CV, tÃ©lÃ©charger CV, refaire CV, moderniser CV, CV PDF",canonical:"https://career.studyia.net/upload",structuredData:l({name:"AmÃ©liorer votre CV existant",description:"TÃ©lÃ©chargez et amÃ©liorez votre CV avec notre outil d'optimisation",url:"https://career.studyia.net/upload"})});const{getRootProps:g,getInputProps:b,isDragActive:S}=c({onDrop:async e=>{var n;const r=e[0];if(!r)return;N(!0),T(null);try{let e="";if("application/pdf"!==r.type)throw new Error(E("upload.docxNotSupported"));e=await(async e=>{const n=await e.arrayBuffer(),r=await u.getDocument(n).promise;let t="";for(let s=1;s<=r.numPages;s++){const e=await r.getPage(s);t+=(await e.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" ")+"\n"}return t})(r);const t="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",s=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","HTTP-Referer":"http://localhost:8080/","X-Title":"Studyia Career CV Builder"},body:JSON.stringify({model:"meta-llama/llama-3.3-70b-instruct:free",messages:[{role:"system",content:'Tu es une IA spÃ©cialisÃ©e dans lâ€™analyse, lâ€™extraction et la structuration de CV pour une application de carriÃ¨re appelÃ©e Studyia Career.\n\nTon rÃ´le est de transformer le TEXTE BRUT dâ€™un CV (issu dâ€™un PDF, DOCX ou copier-coller) en un objet JSON structurÃ©, propre et exploitable par une application web.\n\nTu agis comme un moteur de parsing intelligent, rigoureux et fiable, adaptÃ© au marchÃ© francophone.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸŽ¯ OBJECTIF PRINCIPAL\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nÃ€ partir du texte brut dâ€™un CV fourni en entrÃ©e :\n- Identifier\n- Extraire\n- Classer\n- HiÃ©rarchiser\nles informations du CV\nET\n- Retourner UNIQUEMENT un objet JSON valide\n- Respecter STRICTEMENT la structure dÃ©finie ci-dessous\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ“¦ FORMAT DE SORTIE OBLIGATOIRE (JSON UNIQUEMENT)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTu dois retourner EXACTEMENT cette structure JSON :\n\n{\n  "personalInfo": {\n    "firstName": "",\n    "lastName": "",\n    "email": "",\n    "phone": "",\n    "city": "",\n    "country": "",\n    "summary": ""\n  },\n  "targetJob": "",\n  "experiences": [\n    {\n      "title": "",\n      "company": "",\n      "location": "",\n      "startDate": "",\n      "endDate": "",\n      "description": ""\n    }\n  ],\n  "education": [\n    {\n      "degree": "",\n      "school": "",\n      "location": "",\n      "startDate": "",\n      "endDate": "",\n      "description": ""\n    }\n  ],\n  "skills": []\n}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ“Œ RÃˆGLES STRICTES (TRÃˆS IMPORTANT)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n1. âš ï¸ TA RÃ‰PONSE DOIT ÃŠTRE UNIQUEMENT DU JSON\n   - Aucun texte\n   - Aucune explication\n   - Aucun commentaire\n   - Aucun markdown\n\n2. ðŸ” DONNÃ‰ES MANQUANTES\n   - Si une information nâ€™est PAS trouvÃ©e dans le CV :\n     - utiliser une chaÃ®ne vide "" pour les champs texte\n     - utiliser un tableau vide [] pour les listes\n\n3. ðŸ§  INTERPRÃ‰TATION INTELLIGENTE\n   - Tu dois reconnaÃ®tre :\n     - diffÃ©rentes langues (principalement franÃ§ais)\n     - diffÃ©rentes structures de CV\n     - diffÃ©rentes appellations de sections :\n       - â€œExpÃ©rience professionnelleâ€, â€œParcoursâ€, â€œWork Experienceâ€\n       - â€œFormationâ€, â€œÃ‰ducationâ€, â€œStudiesâ€\n       - â€œCompÃ©tencesâ€, â€œSkillsâ€, â€œExpertiseâ€\n   - Tu dois regrouper logiquement les informations mÃªme si le CV est mal structurÃ©\n\n4. ðŸ“… DATES\n   - Les formats de dates sont FLEXIBLES :\n     - "2022"\n     - "01/2021 - 06/2023"\n     - "Janvier 2020 â€“ PrÃ©sent"\n   - Ne reformate pas agressivement\n   - Recopie la valeur telle quâ€™elle apparaÃ®t, de maniÃ¨re propre et lisible\n\n5. ðŸ§¾ EXPÃ‰RIENCES & FORMATION\n   - Chaque expÃ©rience ou formation doit Ãªtre un objet distinct\n   - La description doit contenir les missions, responsabilitÃ©s ou dÃ©tails disponibles. SÃ©pare chaque mission ou point par un retour Ã  la ligne (\n).\n   - Ne fusionne pas plusieurs expÃ©riences en une seule\n\n6. ðŸŽ¯ POSTE CIBLÃ‰ (targetJob)\n   - Si un poste recherchÃ© est clairement mentionnÃ© (ex: â€œDÃ©veloppeur Webâ€, â€œData Analystâ€), renseigne-le\n   - Sinon, retourne une chaÃ®ne vide ""\n\n7. ðŸ§¼ NETTOYAGE\n   - Supprime les doublons Ã©vidents\n   - Nettoie les caractÃ¨res inutiles\n   - Ne rÃ©Ã©cris pas le contenu, ne fais pas dâ€™analyse sÃ©mantique avancÃ©e\n   - Ton rÃ´le est STRUCTURANT, pas CONSEILLER\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ›‘ INTERDICTIONS ABSOLUES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n- Ne jamais inventer une information\n- Ne jamais remplir un champ avec une supposition\n- Ne jamais ajouter de champs supplÃ©mentaires\n- Ne jamais modifier la structure JSON\n- Ne jamais parler Ã  lâ€™utilisateur\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… RÃ‰SULTAT ATTENDU\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nUn JSON propre, cohÃ©rent, prÃªt Ã  Ãªtre injectÃ© directement dans lâ€™Ã©diteur de CV Studyia Career pour :\n- affichage\n- modification\n- reformatage\n- analyse IA ultÃ©rieure'},{role:"user",content:`Here is the CV text to analyze:\n\n${e}`}]})});if(!s.ok){const e=await s.json();throw new Error((null==(n=e.error)?void 0:n.message)||E("upload.analysisError"))}const a=(await s.json()).choices[0].message.content,i=a.indexOf("{"),o=a.lastIndexOf("}")+1;if(-1===i||0===o)throw new Error(E("upload.noJsonFound"));const l=a.substring(i,o),c=JSON.parse(l);m({title:E("upload.analysisSuccess"),description:E("upload.analysisSuccessDesc")}),(e=>{j("/builder",{state:{uploadedData:e}})})(c)}catch(t){const e=t instanceof Error?t.message:E("upload.genericError");T(e),m({title:E("upload.analysisErrorTitle"),description:e,variant:"destructive"})}finally{N(!1)}},accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:1});return e.jsxs("div",{className:"min-h-screen bg-muted/30 flex flex-col items-center justify-center p-4 relative",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(i,{to:"/",children:e.jsxs(p,{variant:"ghost",children:[e.jsx(n,{className:"mr-2 h-4 w-4"})," ",E("upload.backHome")]})})}),e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"bg-background p-8 rounded-xl shadow-lg border border-border",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:E("upload.title")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:E("upload.subtitle")})]}),e.jsxs("div",{...g(),className:"p-10 border-2 border-dashed rounded-xl text-center cursor-pointer transition-colors\n              "+(S?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:[e.jsx("input",{...b()}),x?e.jsxs("div",{className:"flex flex-col items-center justify-center text-primary",children:[e.jsx(f,{}),e.jsx("p",{className:"font-semibold -mt-8",children:E("upload.analyzing")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E("upload.pleaseWait")})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[e.jsx(r,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"font-semibold",children:E("upload.dragDrop")}),e.jsx("p",{className:"text-sm",children:E("upload.orClick")})]})]}),h&&e.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/50 text-destructive-foreground rounded-lg flex items-center",children:[e.jsx(t,{className:"w-5 h-5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:h})]})]})})]})};export{x as default};
