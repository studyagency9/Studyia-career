import{c as F,r as n,j as e,l as m,X as L,o as T,e as E,b as B,d as H,f as J,a as _,B as u}from"./index-Bj1s_XcD.js";import{P as A}from"./PartnerLayout-BgbMYxUy.js";import M from"./BuilderPage-k22uXqxz.js";import{I as q}from"./input-D2YfaGKm.js";import{L as U}from"./label-CSy4I3SE.js";import{R as Y,P as K,C as j,a as X,T as y,D,O as w}from"./pdfGenerator-EQcNlQC3.js";import{m as G}from"./proxy-iKs4YyP_.js";import{A as Q}from"./arrow-left-dJdu5K7P.js";import"./index-CKzmga31.js";import"./tslib.es6-CiBE_y40.js";import"./index-VZFS3j2r.js";import"./chevron-right-B_YPOfBq.js";import"./globe-CQwUOuMR.js";import"./file-text-o8_AlPxW.js";import"./upload-D3fRU1Y5.js";import"./sparkles-4mPYkMR5.js";import"./select-Ld4_hF2K.js";import"./mail-94XsDbyJ.js";import"./map-pin-CV1gn_Rd.js";import"./AnalysisAnimation-DDNIiVMl.js";import"./circle-check-big-B6r6KDPe.js";import"./zap-DKTWbYea.js";import"./eye-YRC5fa3_.js";import"./trending-up-CT4S0BSe.js";import"./download-Dw8tDbxT.js";import"./___vite-browser-external_commonjs-proxy-cjpsf4tL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=F("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Z=Y,$=K,C=n.forwardRef(({className:t,...s},o)=>e.jsx(w,{ref:o,className:m("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));C.displayName=w.displayName;const S=n.forwardRef(({className:t,children:s,...o},h)=>e.jsxs($,{children:[e.jsx(C,{}),e.jsxs(j,{ref:h,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[s,e.jsxs(X,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));S.displayName=j.displayName;const k=({className:t,...s})=>e.jsx("div",{className:m("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});k.displayName="DialogHeader";const V=({className:t,...s})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});V.displayName="DialogFooter";const P=n.forwardRef(({className:t,...s},o)=>e.jsx(y,{ref:o,className:m("text-lg font-semibold leading-none tracking-tight",t),...s}));P.displayName=y.displayName;const I=n.forwardRef(({className:t,...s},o)=>e.jsx(D,{ref:o,className:m("text-sm text-muted-foreground",t),...s}));I.displayName=D.displayName;const ke=()=>{const{id:t}=T(),{getCV:s,saveCV:o,updateCV:h}=E(),l=B(),f=H(),{toast:d}=J(),{t:a}=_(),[c,v]=n.useState(""),[R,p]=n.useState(!1),[ee,g]=n.useState(null),[b,O]=n.useState(!1);n.useEffect(()=>{var i;if(t==="new")if(O(!0),p(!0),(i=f.state)!=null&&i.uploadedData){const r=f.state.uploadedData;localStorage.setItem("cv_data",JSON.stringify(r)),g(r),l(f.pathname,{replace:!0,state:{}})}else{const r=localStorage.getItem("cv_data");if(r)try{g(JSON.parse(r))}catch(x){console.error("Error parsing uploaded CV data:",x)}}else if(t){const r=s(t);r?(g(r.data),v(r.name),localStorage.setItem("cv_data",JSON.stringify(r.data))):(d({title:a("home.partner.builder.cvNotFound"),description:a("home.partner.builder.cvNotFoundDesc"),variant:"destructive"}),l("/partner/cvs"))}},[t,s,l,d]);const z=()=>{if(!c.trim()){d({title:a("home.partner.builder.nameRequired"),description:a("home.partner.builder.nameRequiredDesc"),variant:"destructive"}),p(!0);return}const i=localStorage.getItem("cv_data");if(!i){d({title:a("home.partner.builder.error"),description:a("home.partner.builder.noDataToSave"),variant:"destructive"});return}const r=JSON.parse(i);if(b||t==="new"){const x=localStorage.getItem("language")||"fr";o({name:c,language:x,data:r}),d({title:a("home.partner.builder.cvCreated"),description:a("home.partner.builder.cvCreatedDesc")}),l("/partner/cvs")}else t&&(h(t,r),d({title:a("home.partner.builder.cvUpdated"),description:a("home.partner.builder.cvUpdatedDesc")}))},N=()=>{c.trim()&&p(!1)};return e.jsx(A,{children:e.jsxs("div",{className:"relative",children:[e.jsx(G.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b border-border shadow-sm",children:e.jsxs("div",{className:"px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>l("/partner/cvs"),className:"text-muted-foreground hover:text-foreground",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),a("home.partner.builder.back")]}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:c||a("home.partner.builder.newCV")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a(b||t==="new"?"home.partner.builder.creating":"home.partner.builder.editing")})]})]}),e.jsxs(u,{onClick:z,className:"bg-gradient-to-r from-primary to-blue-bright hover:shadow-lg hover:shadow-primary/50 transition-all",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),a("home.partner.builder.save")]})]})}),e.jsx("div",{className:"bg-background",children:e.jsx(M,{})}),e.jsx(Z,{open:R,onOpenChange:p,children:e.jsxs(S,{children:[e.jsxs(k,{children:[e.jsx(P,{children:a("home.partner.builder.nameYourCV")}),e.jsx(I,{children:a("home.partner.builder.nameYourCVDesc")})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"cvName",children:a("home.partner.builder.cvName")}),e.jsx(q,{id:"cvName",placeholder:a("home.partner.builder.cvNamePlaceholder"),value:c,onChange:i=>v(i.target.value),onKeyDown:i=>{i.key==="Enter"&&N()},autoFocus:!0})]})}),e.jsxs(V,{children:[e.jsx(u,{variant:"outline",onClick:()=>l("/partner/cvs"),children:a("home.partner.builder.cancel")}),e.jsx(u,{onClick:N,disabled:!c.trim(),children:a("home.partner.builder.continue")})]})]})})]})})};export{ke as default};
